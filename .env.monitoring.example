# CypherJester Monitoring Configuration
# Copy to .env.monitoring and fill in values

# Telegram alerts (create bot via @BotFather)
TELEGRAM_BOT_TOKEN=
TELEGRAM_CHAT_ID=

# Wallet backup encryption passphrase (generate: openssl rand -hex 32)
BACKUP_PASSPHRASE=

# Paths (defaults shown â€” override if needed)
BACKUP_DIR=/opt/zcashino/backups/wallet
DB_PATH=/opt/zcashino/data/zcashino.db
DB_BACKUP_DIR=/opt/zcashino/backups/db

# Docker compose file (mainnet: docker-compose.mainnet.yml)
COMPOSE_FILE=docker-compose.mainnet.yml

# Health endpoint (internal, not public)
HEALTH_URL=http://127.0.0.1:3000/api/health
APP_BASE_URL=http://127.0.0.1:3000
# Admin overview checks use ADMIN_USERNAME and ADMIN_PASSWORD from .env.mainnet

# Guarded-live logs/state
GUARDED_LIVE_BASELINE_LOG=/opt/zcashino/ops/guarded-live-baseline.jsonl
GUARDED_LIVE_MONITOR_LOG=/opt/zcashino/ops/guarded-live-monitor.jsonl
GUARDED_LIVE_STATE_FILE=/opt/zcashino/ops/guarded-live-state.json
GUARDED_LIVE_RECONCILE_LOG=/opt/zcashino/ops/guarded-live-reconcile.jsonl

# Thresholds
MIN_HOUSE_BALANCE=0.5
DISK_THRESHOLD=85
MAX_BLOCK_AGE=600

# Crontab entries (add with: crontab -e)
# Guarded-live cadence: enable only one guarded-live monitor line at a time.
# */5 * * * *  /opt/zcashino/scripts/check-node.sh    >> /var/log/cypherjester/node.log 2>&1
# */15 * * * * /opt/zcashino/scripts/check-balance.sh  >> /var/log/cypherjester/balance.log 2>&1
# 0 * * * *    /opt/zcashino/scripts/check-disk.sh     >> /var/log/cypherjester/disk.log 2>&1
# 0 3 * * *    /opt/zcashino/scripts/backup-db.sh      >> /var/log/cypherjester/db-backup.log 2>&1
# 0 4 * * 0    /opt/zcashino/scripts/backup-wallet.sh  >> /var/log/cypherjester/wallet-backup.log 2>&1
# First 6h of guarded live:
# */15 * * * * /opt/zcashino/scripts/guarded-live-monitor.js --alert >> /var/log/cypherjester/guarded-live-monitor.log 2>&1
# After first 6h, disable the 15m line above and enable hourly:
# 0 * * * *    /opt/zcashino/scripts/guarded-live-monitor.js --alert >> /var/log/cypherjester/guarded-live-monitor.log 2>&1
# 0 5 * * *    /opt/zcashino/scripts/guarded-live-reconcile.js >> /var/log/cypherjester/guarded-live-reconcile.log 2>&1
