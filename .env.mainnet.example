# CypherJester Mainnet Environment
# CRITICAL: This file contains secrets. Never commit to git.
#
# Copy to .env.mainnet and fill in all values:
#   cp .env.mainnet.example .env.mainnet
#
# Generate secrets:
#   openssl rand -hex 32        # ZCASH_RPC_PASSWORD, ADMIN_SESSION_SECRET, PLAYER_SESSION_SECRET
#   openssl rand -base64 18     # ADMIN_PASSWORD

# ── Network ──────────────────────────────────────────────────────────
ZCASH_NETWORK=mainnet
DEMO_MODE=false
FORCE_HTTPS=true
# Default fairness algorithm for NEW games
FAIRNESS_DEFAULT_VERSION=hmac_sha256_v1
# Provably fair mode rollout:
#   legacy_per_game_v1  -> existing per-game commitments
#   session_nonce_v1    -> session seed + nonce (rotate-to-reveal)
PROVABLY_FAIR_MODE=legacy_per_game_v1
# Session seed pool (used in session_nonce_v1)
SESSION_SEED_POOL_MIN=5
SESSION_SEED_POOL_TARGET=15
SESSION_SEED_POOL_CHECK_INTERVAL_MS=300000
SESSION_SEED_ON_DEMAND_CREATE=true

# ── Database ─────────────────────────────────────────────────────────
DATABASE_URL=file:/app/data/zcashino.db
# For Turso (optional): DATABASE_URL=libsql://your-db.turso.io
# TURSO_AUTH_TOKEN=

# ── Zcash RPC ────────────────────────────────────────────────────────
ZCASH_RPC_USER=zcashrpc
ZCASH_RPC_PASSWORD=
# RPC URL is set in docker-compose.mainnet.yml (http://zcashd:8232)

# ── House Wallet ─────────────────────────────────────────────────────
# Generate after zcashd syncs (account model):
#   zcash-cli z_getnewaccount
#   zcash-cli z_getaddressforaccount <account> '["sapling"]'
HOUSE_ZADDR_MAINNET=

# ── Admin ────────────────────────────────────────────────────────────
ADMIN_USERNAME=admin
ADMIN_PASSWORD=
ADMIN_SESSION_SECRET=

# ── Player Session Auth ──────────────────────────────────────────────
# Signed player session cookie secret (32+ chars in production)
PLAYER_SESSION_SECRET=
# compat for rollout, strict after fallback usage is near-zero
PLAYER_SESSION_AUTH_MODE=compat

# ── Withdrawal Controls ─────────────────────────────────────────────
# Withdrawals >= this amount require admin approval (0 = disabled)
WITHDRAWAL_APPROVAL_THRESHOLD=1.0

# ── Kill Switch ──────────────────────────────────────────────────────
# Set to true to start in maintenance mode (blocks new games/withdrawals)
# Runtime toggle via admin dashboard persists to disk
KILL_SWITCH=false

# ── Rate Limits (optional overrides) ─────────────────────────────────
# ADMIN_RATE_LIMIT_LOGIN_MAX=10
# ADMIN_RATE_LIMIT_LOGIN_WINDOW_MS=900000
# ADMIN_RATE_LIMIT_READ_MAX=180
# ADMIN_RATE_LIMIT_READ_WINDOW_MS=60000
# ADMIN_RATE_LIMIT_ACTION_MAX=30
# ADMIN_RATE_LIMIT_ACTION_WINDOW_MS=60000

# ── Sentry Error Tracking (recommended) ──────────────────────────────
NEXT_PUBLIC_SENTRY_DSN=
SENTRY_AUTH_TOKEN=
SENTRY_ORG=
SENTRY_PROJECT=

# ── Monitoring (for scripts/send-alert.sh) ───────────────────────────
# TELEGRAM_BOT_TOKEN=
# TELEGRAM_CHAT_ID=
# HOUSE_BALANCE_ALERT_THRESHOLD=0.5
